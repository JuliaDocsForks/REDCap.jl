


<a id='Importing-1'></a>

# Importing


Importing into a REDCap database is straightforward. The data to be imported must be presented in either `json` (Array of Dicts), `csv`/`df`, or `xml` format. These files can be loaded from a filepath as well. The correct format must be passed along with the object. REDCap defaults to `json` if no format is given.


<b>Note</b> Some import functions (Metadata) are only available for projects marked in development, while others override features disabled (arm, event).


<a id='Records-1'></a>

## Records

<a id='REDCap.import_records-Tuple{REDCap.Config,Any}' href='#REDCap.import_records-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_records`** &mdash; *Method*.



```
import_records(config::REDCap.Config, data::Any; format::String="json", dtype::String="flat", 
					overwriteBehavior::String="normal", forceAutoNumber::Bool=false, dateFormat::String="YMD",
					returnContent::String="count", returnFormat::String="json")
```

Import a set of records for a project.

**Parameters:**

  * `config` - Struct containing url and api-key
  * `recordData` - Array of record data to be imported - pass as a file location to import from disk
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data
  * `dtype` - "flat" (one record per row) or "eav" (one data point per row)
  * `overwriteBehavior` - "normal" - will not overwrite, "overwrite" - will
  * `forceAutoNumber` - Force auto-numbering and overwrite given id number
  * `dateFormat` - "YMD", "MDY", or "DMY"
  * `returnContent` - "count" (number of successfully uploaded records),

```
					"ids" (list of record numbers imported), 
					"auto-ids" (pair of assigned id and given id)
```

  * `returnFormat` - Error message format

**Returns:**

Specified by returnContent


Record:


```bash
Dict{String,Any} with 16 entries:
  "sex"                   => "0"
  "age"                   => "56"
  "address"               => "168 Anderson Blvd. Quincy MA 01227"
  "height"                => "80"
  "dob"                   => "1962-04-08"
  "record_id"             => "1"
  "bmi"                   => "125"
  "comments"              => "Randomly Generated - Demographics"
  "email"                 => "ALin@aol.com"
  "first_name"            => "Alexia"
  "demographics_complete" => "0"
  "telephone"             => "(617) 882-6049"
  "weight"                => "80"
  "last_name"             => "Lin"
  "ethnicity"             => "1"
  "race"                  => "1"
```


```julia
record_data=[Dict("record_id"=>"1","first_name"=>"John")]

import_records(config, record_data)

#or from a file
import_records(config, "/src/records.csv", format="csv")
```


Which returns the number of records imported.


```bash
Dict{String,Any} with 1 entry:
  "count" => 1
```


By default, `json` is passed as the target format, but `csv`/`df`, `xml`, and `odm` formats are supported for import as well as export.


For projects with auto-numbering enabled. The next available record id number is generated by the `generate_next_record_id()` function:


```julia
next_id = generate_next_record_id(config)
```


Which returns the number as an integer.


<a id='Project-Info-1'></a>

## Project Info

<a id='REDCap.import_project_information-Tuple{REDCap.Config,Any}' href='#REDCap.import_project_information-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_project_information`** &mdash; *Method*.



```
import_project_information(config::REDCap.Config, data; format::String="json")
```

Update basic attributes of given REDCap project. NOTE: Only for projects in development

**Parameters:**

  * `config` - Struct containing url and api-key
  * `data` - Data to be imported - pass as a file location to import from disk
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data

**Returns:**

Number of successfully imported values


The project information and settings can be changed using this function by importing a dict with some/all of the desired settings.


```bash
Dict{String,Any} with 23 entries:
  "secondary_unique_field"              => ""
  "surveys_enabled"                     => "0"
  "purpose_other"                       => ""
  "has_repeating_instruments_or_events" => 0
  "production_time"                     => ""
  "project_grant_number"                => ""
  "ddp_enabled"                         => "0"
  "project_id"                          => "21"
  "purpose"                             => "0"
  "scheduling_enabled"                  => "0"
  "randomization_enabled"               => "0"
  "project_language"                    => "English"
  "is_longitudinal"                     => 0
  "project_title"                       => "RC Test"
  "project_pi_firstname"                => ""
  "display_today_now_button"            => "1"
  "record_autonumbering_enabled"        => "1"
  "creation_time"                       => "2018-07-16 19:17:34"
  "project_notes"                       => "testing"
  "in_production"                       => "0"
  "project_irb_number"                  => ""
  "custom_record_label"                 => ""
  "project_pi_lastname"                 => ""

```


A project can be marked as "In Production" this way, by changing the `in_production` value to 1.


```julia
#Modifying existing information
info = export_project_information(config)
info["in_production"]="1"
import_project_information(config, info)
```


<a id='Metadata-1'></a>

## Metadata

<a id='REDCap.import_metadata-Tuple{REDCap.Config,Any}' href='#REDCap.import_metadata-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_metadata`** &mdash; *Method*.



```
import_metadata(config::REDCap.Config, data; format::String="json", returnFormat::String="json")
```

Import metadata (i.e., Data Dictionary) into a project. NOTE: Only for projects in development

**Parameters:**

  * `config` - Struct containing url and api-key
  * `data` - Data to be imported - pass as a file location to import from disk
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data
  * `returnFormat` - Error message format

**Returns:**

Number of successfully imported fields


A projects metadata can be modified before it leaves development status using the `import_metadata()` function


An example of the "Contact Information" field:


```bash
Dict{String,Any} with 18 entries:
  "required_field"                             => ""
  "section_header"                             => "Contact Information"
  "matrix_ranking"                             => ""
  "select_choices_or_calculations"             => ""
  "field_type"                                 => "text"
  "field_note"                                 => ""
  "form_name"                                  => "demographics"
  "matrix_group_name"                          => ""
  "field_label"                                => "First Name"
  "custom_alignment"                           => ""
  "question_number"                            => ""
  "text_validation_max"                        => ""
  "text_validation_type_or_show_slider_number" => ""
  "branching_logic"                            => ""
  "field_annotation"                           => ""
  "identifier"                                 => "y"
  "text_validation_min"                        => ""
  "field_name"                                 => "first_name"

```


```julia
#Example once this works
```


<a id='Users-1'></a>

## Users

<a id='REDCap.import_users-Tuple{REDCap.Config,Any}' href='#REDCap.import_users-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_users`** &mdash; *Method*.



```
import_users(config::REDCap.Config, data; format::String="json", returnFormat::String="json")
```

Update/import new users into a project.

**Parameters:**

  * `config` - Struct containing url and api-key
  * `data` - Data to be imported - pass as a file location to import from disk
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data
  * `returnFormat` - Error message format

**Returns:**

Number of succesfully added/modified users.


Users may be imported in the same way as above. User permissions are set/modified in this way.


```bash
julia> new_user

Dict{String,Any} with 32 entries:
  "design"                     => "0"
  "api_export"                 => "0"
  "user_rights"                => "0"
  "data_access_groups"         => "0"
  "data_comparison_tool"       => "0"
  "username"                   => "john_smith@email.com"
  "data_access_group_id"       => ""
  "data_export"                => "0"
  "record_create"              => "0"
  "reports"                    => "0"
  "data_import_tool"           => "0"
  "file_repository"            => "0"
  "mobile_app_download_data"   => "0"
  "mobile_app"                 => "0"
  "email"                      => ""
  "data_quality_create"        => "0"
  "record_delete"              => "0"
  "calendar"                   => "0"
  "lock_records_all_forms"     => "0"
  "firstname"                  => ""
  "expiration"                 => ""
  "data_access_group"          => ""
  "forms"                      => Dict{String,Any}(Pair{String,Any}("demographics", "0"))
  "api_import"                 => "0"
  "stats_and_charts"           => "0"
  "record_rename"              => "0"
  "lock_records_customization" => "0"
  "logging"                    => "0"
  "lock_records"               => "0"
  "data_quality_execute"       => "0"
  "manage_survey_participants" => "0"
  "lastname"                   => ""

```


```julia
#Add above user to the list of users
push!(user_list, new_user)

#Import new list into REDCap
import_users(config, user_list)
```


User Permissions:


```
Data Export: 0=No Access, 2=De-Identified, 1=Full Data Set
Form Rights: 0=No Access, 2=Read Only, 1=View records/responses and edit records (survey responses are read-only), 3=Edit survey responses
Other attribute values: 0=No Access, 1=Access.
```


<a id='Files-1'></a>

## Files

<a id='REDCap.import_file-Tuple{REDCap.Config,String,String,String,String}' href='#REDCap.import_file-Tuple{REDCap.Config,String,String,String,String}'>#</a>
**`REDCap.import_file`** &mdash; *Method*.



```
import_file(config::REDCap.Config, record::String, field::String, event::String, file::String; repeat_instance::Int=1,
				returnFormat::String="json")
```

Upload a document to specific record to the designated uploading field.

**Parameters:**

  * `config` - Struct containing url and api-key
  * `record` - Destination record id
  * `field` - Destination file upload field
  * `event` - Destination event
  * `repeat_instance` - Number of repeated instances (long project)
  * `file` - File to be imported
  * `returnFormat` - Error message format

**Returns:**

Nothing/errors


A specified file upload field is required to import a file. Any attempts to upload a file in a non-file field will result in error.


```julia
import_file(config, "2", "file_upload", "", "/src/example.csv")
```


<a id='Arms-1'></a>

## Arms

<a id='REDCap.import_arms-Tuple{REDCap.Config,Any}' href='#REDCap.import_arms-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_arms`** &mdash; *Method*.



```
import_arms(config::REDCap.Config, data; override::Int=0, format::String="json", returnFormat::String="json")
```

Update/import Arms into a project.

**Parameters:**

  * `config` - Struct containing url and api-key
  * `data` - Data to be imported - pass as a file location to import from disk
  * `override` - 0 (false) 1 (true) - overwrites existing arms
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data
  * `returnFormat` - Error message format

**Returns:**

Number of successfully imported arms


Arms may be imported into REDCap by passing the name and arm number


```bash
Dict{String,Any} with 2 entries:
  "name"    => "Arm 1"
  "arm_num" => 1
```


```julia
import_arms(config, newarm)
```


<a id='Events-1'></a>

## Events

<a id='REDCap.import_events-Tuple{REDCap.Config,Any}' href='#REDCap.import_events-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_events`** &mdash; *Method*.



```
import_events(config::REDCap.Config, data; override::Int=0, format::String="json", returnFormat::String="json")
```

Update/import Events into a project.

**Parameters:**

  * `config` - Struct containing url and api-key
  * `data` - Data to be imported - pass as a file location to import from disk
  * `override` - 0 (false) 1 (true) - overwrites existing events
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data
  * `returnFormat` - Error message format

**Returns:**

Number of successfully imported events


Events can be passed into REDCap by passing their name and arm number, as well as any additional configurations.


```bash
Dict{String,Any} with 7 entries:
  "unique_event_name"  => "event_1_arm_1"
  "custom_event_label" => nothing
  "offset_max"         => "0"
  "arm_num"            => "1"
  "event_name"         => "Event 1"
  "day_offset"         => "1"
  "offset_min"         => "0"
```


```julia
import_events(config, event)
```


Importing events with the same name will not overwrite by default, and will instead append a character. This can be changed by passing `override=1` to overwrite existing events.


<a id='Instrument-Event-Mappings-1'></a>

## Instrument Event Mappings

<a id='REDCap.import_instrument_event_mappings-Tuple{REDCap.Config,Any}' href='#REDCap.import_instrument_event_mappings-Tuple{REDCap.Config,Any}'>#</a>
**`REDCap.import_instrument_event_mappings`** &mdash; *Method*.



```
import_instrument_event_mappings(config::REDCap.Config, data; format::String="json", returnFormat::String="json")
```

Import Instrument-Event Mappings into a project 

**NOTE: This only works for longitudinal projects.**

**Parameters:**

  * `config` - Struct containing url and api-key
  * `data` - Data to be imported - pass as a file location to import from disk
  * `format` - "json", "xml", "csv", or "odm". declares format of imported data
  * `returnFormat` - Error message format

**Returns:**

Number of successfully imported inst-event mappings


The Instrument Event mapping allows REDCap to link different forms to different events easily.


```bash
Dict{String,Any} with 3 entries:
  "arm_num"           => 1
  "form"              => "demographics"
  "unique_event_name" => "event_1_arm_1"
```


New mappings can be created by specifying the arm, form, and event name to link together.


```julia
import_instrument_event_mappings(config, newmap)
```

