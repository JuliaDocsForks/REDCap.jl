# Importing

Importing into a REDCap database is simple. The data to be imported must be presented in either `json` (Array of Dicts), `csv`/`df`, or `xml` format. These files can be loaded from a filepath as well. The correct format must be passed along with the object. REDCap defaults to `json` if not format is given.


## Records

EX Record:
```bash
Dict{String,Any} with 16 entries:
  "sex"                   => "0"
  "age"                   => "56"
  "address"               => "168 Anderson Blvd. Quincy MA 01227"
  "height"                => "80"
  "dob"                   => "1962-04-08"
  "record_id"             => "1"
  "bmi"                   => "125"
  "comments"              => "Randomly Generated - Demographics"
  "email"                 => "ALin@aol.com"
  "first_name"            => "Alexia"
  "demographics_complete" => "0"
  "telephone"             => "(617) 882-6049"
  "weight"                => "80"
  "last_name"             => "Lin"
  "ethnicity"             => "1"
  "race"                  => "1"
```

```julia
records_data=[Dict("record_id"=>"1","first_name"=>"John")]

import_records(config, records_data)

#Or from a file
import_records(config, "/src/records.csv", format="csv")
```
Which returns the number of records imported.
```bash
Dict{String,Any} with 1 entry:
  "count" => 1
```

By default, `json` is passed as the target format, but `csv`/`df`, `xml`, and `odm` formats are supported for import as well as export.

For projects with auto-numbering enabled. The next available record id number is generated by the `generate_next_record_id()` function:
```julia
generate_next_record_id(config)
```
Which returns the number as an integer.

#### Note
Some import functions (Metadata) are only available for projects marked in development, while others override features disabled (arm, event).

## Project Information

The project information and settings can be changed using this function by importing a dict with some/all of the desired settings.

EX:
```bash
Dict{String,Any} with 23 entries:
  "secondary_unique_field"              => ""
  "surveys_enabled"                     => "0"
  "purpose_other"                       => ""
  "has_repeating_instruments_or_events" => 0
  "production_time"                     => ""
  "project_grant_number"                => ""
  "ddp_enabled"                         => "0"
  "project_id"                          => "21"
  "purpose"                             => "0"
  "scheduling_enabled"                  => "0"
  "randomization_enabled"               => "0"
  "project_language"                    => "English"
  "is_longitudinal"                     => 0
  "project_title"                       => "RC Test"
  "project_pi_firstname"                => ""
  "display_today_now_button"            => "1"
  "record_autonumbering_enabled"        => "1"
  "creation_time"                       => "2018-07-16 19:17:34"
  "project_notes"                       => "testing"
  "in_production"                       => "0"
  "project_irb_number"                  => ""
  "custom_record_label"                 => ""
  "project_pi_lastname"                 => ""

```

## Users

Users may be imported in the same way as above. User permissions are set/modified in this way.

EX:
```bash
Dict{String,Any} with 32 entries:
  "design"                     => "0"
  "api_export"                 => "0"
  "user_rights"                => "0"
  "data_access_groups"         => "0"
  "data_comparison_tool"       => "0"
  "username"                   => "john_smith@email.com"
  "data_access_group_id"       => ""
  "data_export"                => "0"
  "record_create"              => "0"
  "reports"                    => "0"
  "data_import_tool"           => "0"
  "file_repository"            => "0"
  "mobile_app_download_data"   => "0"
  "mobile_app"                 => "0"
  "email"                      => ""
  "data_quality_create"        => "0"
  "record_delete"              => "0"
  "calendar"                   => "0"
  "lock_records_all_forms"     => "0"
  "firstname"                  => ""
  "expiration"                 => ""
  "data_access_group"          => ""
  "forms"                      => Dict{String,Any}(Pair{String,Any}("demographics", "0"))
  "api_import"                 => "0"
  "stats_and_charts"           => "0"
  "record_rename"              => "0"
  "lock_records_customization" => "0"
  "logging"                    => "0"
  "lock_records"               => "0"
  "data_quality_execute"       => "0"
  "manage_survey_participants" => "0"
  "lastname"                   => ""

```

## Files

A specified file upload field is required to import a file. Any attempts to upload a file in another field will result in error.